uuid: eb8985b4-3ae0-42c8-aaa1-ad44a6b8b4cd
langcode: en
status: true
dependencies: {  }
_core:
  default_config_hash: sy6QztR3HHzDrk9lVJuncSNBVft-Y2sktG6fWmZ3bgM
id: fsa_establishment_cy
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags:
  - establishments
  - welsh
migration_group: fsa_rating
label: 'FSA Establishments import'
source:
  plugin: url
  data_fetcher_plugin: http
  data_parser_plugin: xml
  urls:
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS551cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS552cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS553cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS555cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS556cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS558cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS557cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS550cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS559cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS560cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS554cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS561cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS562cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS563cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS564cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS565cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS566cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS567cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS568cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS569cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS570cy-GB.xml'
    - 'http://ratings.food.gov.uk/OpenDataFiles/FHRS571cy-GB.xml'
  item_selector: /FHRSEstablishment/EstablishmentCollection/EstablishmentDetail
  track_changes: true
  fields:
    -
      name: FHRSID
      selector: FHRSID
    -
      name: BusinessName
      selector: BusinessName
    -
      name: BusinessType
      selector: BusinessType
    -
      name: RatingDate
      selector: RatingDate
    -
      name: RatingValue
      selector: RatingValue
    -
      name: AddressLine1
      selector: AddressLine1
    -
      name: AddressLine2
      selector: AddressLine2
    -
      name: AddressLine3
      selector: AddressLine3
    -
      name: AddressLine4
      selector: AddressLine4
    -
      name: PostCode
      selector: PostCode
    -
      name: LocalAuthorityCode
      selector: LocalAuthorityCode
    -
      name: SchemeType
      selector: SchemeType
    -
      name: NewRatingPending
      selector: NewRatingPending
    -
      name: Phone
      selector: Phone
    -
      name: scoreHygiene
      selector: scores/Hygiene
    -
      name: scoreStructural
      selector: scores/Structural
    -
      name: scoreConfidence
      selector: scores/ConfidenceInManagement
    -
      name: longitude
      selector: geocode/longitude
    -
      name: latitude
      selector: geocode/latitude
    -
      name: RightToReply
      selector: RightToReply
  ids:
    FHRSID:
      type: integer
process:
  type:
    plugin: default_value
    default_value: fsa_establishment
  langcode:
    plugin: default_value
    default_value: cy
  id: FHRSID
  name: BusinessName
  field_businesstype:
    plugin: entity_generate
    source: BusinessType
    entity_type: taxonomy_term
    bundle_key: vid
    bundle: fhrs_businesstype
    value_key: name
  field_ratingdate:
    source: RatingDate
    plugin: default_value
    default_value: '1970-01-01'
  field_address:
    plugin: concat
    source:
      - AddressLine1
      - AddressLine2
      - AddressLine3
      - AddressLine4
    delimiter: "\r\n"
  field_postcode: PostCode
  field_localauthoritycode:
    plugin: local_authority_code
    source: LocalAuthorityCode
  field_newratingpending: NewRatingPending
  field_phone: Phone
  field_ratingvalue:
    plugin: rating_value
    source: RatingValue
  field_score_confidence: scoreConfidence
  field_score_hygiene: scoreHygiene
  field_score_structural: scoreStructural
  field_schemetype: SchemeType
  field_geocode/lng:
    plugin: geocode
    source: longitude
  field_geocode/lat:
    plugin: geocode
    source: latitude
  field_righttoreply: RightToReply
  uid:
    plugin: default_value
    default_value: 0
destination:
  plugin: 'entity:fsa_establishment'
  translations: true
migration_dependencies:
  required:
    - rating_value
