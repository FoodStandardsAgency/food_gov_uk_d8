{% set randomID = [] %}
{% for i in 1..10 %}
    {% set alpha = 'abcdefghijklmnopqrstuvwxyz' %}
    {% set alphaUpper = alpha|upper %}
    {% set numbers = '0123456789' %}
    {% set randomCharacter = random(alpha ~ alphaUpper ~ numbers ~ '-_') %}
    {% set randomID = randomID|merge([randomCharacter]) %}
{% endfor %}
{% set randomID = randomID|join %}

<div class="ratings {% if ratings_info_content %}ratings--frontpage{% else %}js-sticky-container{% endif %}">

  {% if ratings_info_content %}
  {% else %}
  <button class="ratings__search-expand-button toggle-button js-toggle-button" aria-expanded="false" aria-controls="collapsible-{{ randomID }}">
    <div class="toggle-button__item">{% trans %}Show search options{% endtrans %}</div>
    <div class="toggle-button__item toggle-button__item--icon svg">
      <svg><use xlink:href="/themes/custom/fsa/dist/sprite.svg#toggle-icon"></use></svg>
    </div>
  </button>
  {% endif %}

  <div class="ratings__search {% if ratings_info_content %}ratings__search--frontpage{% else %} js-sticky-element toggle-content toggle-content--only-mobile js-toggle-content js-toggle-content-only-mobile" id="collapsible-{{ randomID }}" aria-hidden="true{% endif %}">
    <div class="container container--search">
      <div class="ratings__logo logo svg">
        <svg role="presentation"><use xlink:href="/themes/custom/fsa/dist/sprite.svg#logo-desktop-white"></use></svg>
      </div>
      {{ form }}
    </div>
  </div>

  <div class="ratings__content {% if ratings_info_content %}ratings__content--frontpage{% else %}ratings__content--listing{% endif %}">
    {% if ratings_info_content %}
      {{ ratings_info_content }}
    {% else %}
    <div class="ratings__listing">
      <header class="ratings__header" role="toolbar" aria-label="sorting options" aria-controls="sortable">
        {% if sort_form %}
          <div class="ratings__hits-total">{{ hits_total }} {{ 'Results'|t }}</div>
          <div class="ratings__sort-form">{{ sort_form }}</div>
        {% endif %}
      </header>

      <h2 class="visually-hidden" aria-labelledby="sortable">{% trans %}Food hygiene ratings search results{% endtrans %}</h2>
      <div class="table table--with-background js-table" id="sortable" role="grid">
        <div class="table__row table__row--header table__row--negative js-table-header" role="row">
          <div class="table__item table__item--large" role="columnheader">{% trans %}Name{% endtrans %}</div>
          <div class="table__item" role="columnheader">{% trans %}Rating{% endtrans %}</div>
          <div class="table__item" role="columnheader">{% trans %}Inspection date{% endtrans %}</div>
        </div>

        {{ items }}

        {% if hits_total > hits_shown %}
          <button>{% trans %}Show more results{% endtrans %}</button>
          {% trans %}Displaying {{ hits_shown }} of {{ hits_total }} items{% endtrans %}
        {% endif %}
      </div>
    </div>
    {% endif %}
  </div>
</div>
